{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'inscription_connexion/style.css' %}"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,600,0,0" />
    <title>Connexion</title>
</head>
<body>
<div class="login-card-container">
    <div class="login-card">
        <div class="login-card-logo">
            <img src="{% static 'chater_logo.png' %}" alt="chater_logo" style="width:150px">
        </div>
        <div class="login-card-header">
            <h1>Connexion</h1>
            <div>Connectez vous à l'aide du numero entré lors de l'inscription</div>
        </div>
        <form method="post" class="login-card-form">
            {% csrf_token %}
            <div class="form-item">
                <span class="form-item-icon material-symbols-rounded">phone</span>
                <input type="number" placeholder="Entrer numéro" id="phoneForm" autofocus required name="username" class="{{ form.username.errors|yesno:'error,' }}">
            </div>
            <div class="form-item">
                <span class="form-item-icon material-symbols-rounded">lock</span>
                <input type="password" placeholder="Enter Password" id="passwordForm" required name="password" class="{{ form.password.errors|yesno:'error,' }}">
            </div>
            {% if form.errors %}
                <span id="errorMessage" style="font-size: 12px; color: red">Numéro ou mot de passe incorrect !</span>
            {% endif %}

            <button type="submit" id="submitButton">Se connecter</button>
        </form>
        <div class="login-card-footer">
            Je n'ai pas de compte <a href="{% url 'Utilisateur:Inscription' %}">S'inscrire ?</a>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.querySelector('.login-card-form');
        const submitButton = document.getElementById('submitButton');
        form.addEventListener('submit', (event) => {
            event.preventDefault();
            submitButton.disabled = true;
            submitButton.classList.add('loading');
            form.submit();
        });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const errorMessage = document.getElementById('errorMessage');
        if (errorMessage) {
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 2000);
        }
    });

</script>
</body>
</html>